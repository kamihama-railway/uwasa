# 问题修复日志 (Bug Fix Log)

本文档用于记录项目开发过程中发现的逻辑缺陷、功能故障及其修复方案。

| ID | 日期 | 类型 | 描述 | 状态 |
|:---|:---|:---|:---|:---|
| BUG-001 | 2026-03-XX | 逻辑错误 | **标准 VM 字符串拼接失效**：在 `vm.go` 中，融合指令 `OpAddGlobal` 和 `OpAddGlobalGlobal` 仅处理了整数类型。当操作数为字符串时，会错误地回退到浮点转换逻辑，导致 `"a" + "b"` 返回 `0.0`。 | 已修复 |
| | | | | |

---

## 详细说明

### BUG-001: 标准 VM 字符串拼接失效
- **问题现象**：使用 `NewEngineVM` 执行包含变量拼接的表达式（如 `name + "!"`）时，若触发了 peephole 优化产生的融合指令，结果会变为数字 `0`。
- **修复方案**：在 `vm.go` 的指令分发循环中，显式增加了对 `ValString` 类型的判断。如果两个操作数均为字符串，则执行字符串连接。
- **验证**：已在 `vm_test.go` 中增加 `TestVM_FusedStringConcat` 单元测试。
